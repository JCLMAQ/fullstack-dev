<div class="container">
  <div class="header">
    <h1 class="mat-headline-4">Welcome to a not-so-simple form!</h1>
    <p class="mat-body-1">
      Signal Form with Custom validations, Cross-field validations, and Conditional fields
    </p>
  </div>

  <div class="content">
    <mat-card class="form-card">
      <mat-card-content>
        <form class="form-container">
          <!-- Basic Information Section -->
          <section class="form-section">
            <h2 class="mat-title">Basic Information</h2>

            <div class="fields-row">
              <!-- First Name -->
              <mat-form-field appearance="outline">
                <mat-label>First Name *</mat-label>
                <input
                  matInput
                  type="text"
                  [field]="personalForm.firstName"
                  placeholder="Enter your first name"
                />
                <mat-error>
                  <lib-field-error [fieldError]="personalForm.firstName()" />
                </mat-error>
              </mat-form-field>

              <!-- Last Name -->
              <mat-form-field appearance="outline">
                <mat-label>Last Name *</mat-label>
                <input
                  matInput
                  type="text"
                  [field]="personalForm.lastName"
                  placeholder="Enter your last name"
                />
                <mat-error>
                  <lib-field-error [fieldError]="personalForm.lastName()" />
                </mat-error>
              </mat-form-field>
            </div>

            <!-- Date of Birth with Custom Age Validation -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Date of Birth *</mat-label>
              <input
                matInput
                type="date"
                [field]="personalForm.dateOfBirth"
              />
              <mat-error>
                <lib-field-error [fieldError]="personalForm.dateOfBirth()" />
              </mat-error>
            </mat-form-field>
          </section>

          <mat-divider></mat-divider>

          <!-- Password Section with Custom Validation -->
          <section class="form-section">
            <h2 class="mat-title">Password Security</h2>

            <div class="fields-row">
              <!-- Password with Custom Strength Validation -->
              <mat-form-field appearance="outline">
                <mat-label>Password *</mat-label>
                <input
                  matInput
                  type="password"
                  [field]="personalForm.password"
                  placeholder="Enter a strong password"
                />
                <mat-error>
                  <lib-field-error [fieldError]="personalForm.password()" />
                </mat-error>
              </mat-form-field>

              <!-- Confirm Password with Cross-field Validation -->
              <mat-form-field appearance="outline">
                <mat-label>Confirm Password *</mat-label>
                <input
                  matInput
                  type="password"
                  [field]="personalForm.confirmPassword"
                  placeholder="Confirm your password"
                />
                <mat-error>
                  <lib-field-error [fieldError]="personalForm.confirmPassword()" />
                </mat-error>
              </mat-form-field>
            </div>

            <lib-field-error [fieldError]="personalForm()"></lib-field-error>
          </section>

          <mat-divider></mat-divider>

          <!-- Conditional Fields Section -->
          <section class="form-section">
            <h2 class="mat-title">Additional Information</h2>

            <!-- Emergency Contact (Conditional Field) -->
            <div class="emergency-contact">
              <mat-checkbox [field]="personalForm.hasEmergencyContact">
                I have an emergency contact
              </mat-checkbox>

              <div class="fields-row emergency-fields">
                <mat-form-field appearance="outline">
                  <mat-label>Emergency Contact Name</mat-label>
                  <input
                    matInput
                    type="text"
                    [field]="personalForm.emergencyContactName"
                    placeholder="Enter emergency contact name"
                  />
                  <mat-error>
                    <lib-field-error [fieldError]="personalForm.emergencyContactName()" />
                  </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                  <mat-label>Emergency Contact Phone</mat-label>
                  <input
                    matInput
                    type="tel"
                    [field]="personalForm.emergencyContactPhone"
                    placeholder="Enter emergency contact phone"
                  />
                  <mat-error>
                    <lib-field-error [fieldError]="personalForm.emergencyContactPhone()" />
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
          </section>

          <!-- Submit Button -->
          <div class="submit-section">
            <button
              mat-raised-button
              color="primary"
              type="submit"
              class="submit-button"
            >
              Submit Personal Details
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>

    <mat-card class="debug-card">
      <mat-card-header>
        <mat-card-title>Form Data</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <pre class="debug-pre">{{ personalForm().value() | json }}</pre>
        <pre class="debug-pre">{{ personalForm().errorSummary() | json }}</pre>
      </mat-card-content>
    </mat-card>
  </div>
</div>
