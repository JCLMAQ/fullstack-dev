
<mat-card class="changepwd-page">
  <mat-card-title>
    Changement de mot de passe
  </mat-card-title>
  <mat-card-content>
    <form class="changepwd-form">
      <mat-form-field>
        <mat-label>Mot de passe actuel</mat-label>
        <input
          matInput
          [type]="hideOldPassword() ? 'password' : 'text'"
          placeholder="Votre mot de passe actuel"
          autocomplete="current-password"
          [field]="changepwdForm.oldPassword"
        />
        <button
          mat-icon-button
          matSuffix
          type="button"
          (click)="hideOldPassword.set(!hideOldPassword())"
          [attr.aria-label]="'Hide password'"
          [attr.aria-pressed]="hideOldPassword()"
        >
          <mat-icon>{{ hideOldPassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
      </mat-form-field>
      <lib-field-error [fieldError]="changepwdForm.oldPassword()" />

      <mat-form-field>
        <mat-label>Nouveau mot de passe</mat-label>
        <input
          matInput
          [type]="hideNewPassword() ? 'password' : 'text'"
          placeholder="Votre nouveau mot de passe"
          autocomplete="new-password"
          [field]="changepwdForm.newPassword"
        />
        <button
          mat-icon-button
          matSuffix
          type="button"
          (click)="hideNewPassword.set(!hideNewPassword())"
          [attr.aria-label]="'Hide password'"
          [attr.aria-pressed]="hideNewPassword()"
        >
          <mat-icon>{{ hideNewPassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
      </mat-form-field>
      <lib-field-error [fieldError]="changepwdForm.newPassword()" />

      <mat-form-field>
        <mat-label>Confirmer le nouveau mot de passe</mat-label>
        <input
          matInput
          [type]="hideConfirmPassword() ? 'password' : 'text'"
          placeholder="RÃ©-encoder votre nouveau mot de passe"
          autocomplete="new-password"
          [field]="changepwdForm.confirmPassword"
        />
        <button
          mat-icon-button
          matSuffix
          type="button"
          (click)="hideConfirmPassword.set(!hideConfirmPassword())"
          [attr.aria-label]="'Hide password'"
          [attr.aria-pressed]="hideConfirmPassword()"
        >
          <mat-icon>{{ hideConfirmPassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
      </mat-form-field>
      <lib-field-error [fieldError]="changepwdForm.confirmPassword()" />
    </form>
  </mat-card-content>
  <mat-card-actions>
    <button
      mat-raised-button
      color="primary"
      type="submit"
      (click)="changePwd()"
      [disabled]="!changepwdForm().valid()"
    >
      Valider le changement de mot de passe
    </button>
    <button mat-button type="button" (click)="backhome()">
      <mat-icon>cancel_presentation</mat-icon>
    </button>
  </mat-card-actions>
</mat-card>
<div>
  {{ changepwdForm().value() | json }}
</div>
<div>
  {{ changepwdForm().valid() | json }}
</div>
